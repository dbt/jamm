<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>
    <!-- Example logon form bean 
    <form-bean      name="logonForm"
                    type="org.apache.struts.example.LogonForm"/>
     -->
    <form-bean name="loginForm"
               type="jamm.webapp.LoginForm"/>
    <form-bean name="changePasswordForm"
               type="jamm.webapp.ChangePasswordForm"/>
    <form-bean name="domainAccountForm"
               type="jamm.webapp.DomainConfigForm"/>
    <form-bean name="domainAliasForm"
               type="jamm.webapp.DomainConfigForm"/>
    <form-bean name="updateAliasForm"
               type="jamm.webapp.UpdateAliasForm"/>
    <form-bean name="addDomainForm"
               type="jamm.webapp.AddDomainForm"/>
    <form-bean name="addAccountForm"
               type="jamm.webapp.AddAccountForm"/>
    <form-bean name="addAliasForm"
               type="jamm.webapp.AddAliasForm"/>
    <form-bean name="siteConfigForm"
               type="jamm.webapp.SiteConfigForm"/>
    <form-bean name="catchAllForm"
               type="jamm.webapp.CatchAllForm"/>
  </form-beans>

  <!-- ========== Global Forward Definitions ============================== -->
  <global-forwards>
    <!-- Example logon forward 
     <forward   name="logon"                path="/logon.jsp"/>
     -->
    <forward name="home" path="/" redirect="true"/>
    <forward name="login" path="/login.jsp"/>
    <forward name="logout" path="/logout.do"/>
    <forward name="user_home" path="/private/" redirect="true"/>
    <forward name="add_domain" path="/private/add_domain.jsp"/>
    <forward name="add_account" path="/private/add_account.jsp"/>
    <forward name="add_alias" path="/private/add_alias.jsp"/>
    <forward name="general_error" path="/private/general_error.jsp"/>
    <forward name="site_admin" path="/private/site_admin.do"
             redirect="true"/>
    <forward name="domain_admin" path="/private/domain_admin.do"
             redirect="true"/>
    <forward name="account_admin" path="/private/account_admin.do"
             redirect="true"/>
    <forward name="alias_admin" path="/private/alias_admin.do"
             redirect="true"/>
  </global-forwards>


  <!-- ========== Action Mapping Definitions ============================== -->
  <action-mappings>
    <!-- Example logon action 
    <action    path="/logon"
               type="org.apache.struts.example.LogonAction"
               name="logonForm"
              scope="request"
              input="/logon.jsp">
    </action>
    -->

    <!-- Example logoff action 
    <action    path="/logoff"
               type="org.apache.struts.example.LogoffAction">
      <forward name="success"              path="/index.jsp"/>
    </action>
    -->
    
    <action path="/login"
            type="jamm.webapp.LoginAction"
            name="loginForm"
            scope="request"
            validate="false"
            input="/login.jsp">
    </action>

    <action path="/logout"
            type="jamm.webapp.LogoutAction"/>

    <action path="/private/index"
            type="jamm.webapp.MainMenuAction">
      <forward name="account_admin" path="/private/account_admin.do"/>
      <forward name="domain_admin" path="/private/domain_admin.do"/>
      <forward name="site_admin" path="/private/site_admin.do"/>
    </action>

    <action path="/private/site_admin"
            type="jamm.webapp.SiteAdminAction">
      <forward name="view" path="/private/site_admin.jsp"/>
    </action>

    <action path="/private/domain_admin"
            type="jamm.webapp.DomainAdminAction">
      <forward name="view" path="/private/domain_admin.jsp"/>
    </action>

    <action path="/private/account_admin"
            type="jamm.webapp.AccountAdminAction">
      <forward name="view" path="/private/account_admin.jsp"/>
      <forward name="alias_admin" path="/private/alias_admin.jsp"/>
    </action>

    <action path="/private/change_password"
            type="jamm.webapp.ChangePasswordAction"
            name="changePasswordForm"
            scope="request"
            validate="true"
            input="/private/change_password.jsp">
    </action>

    <action path="/private/domain_account"
            type="jamm.webapp.DomainAccountAction"
            name="domainAccountForm"
            scope="request"
            validate="false">
    </action>

    <action path="/private/domain_alias"
            type="jamm.webapp.DomainAliasAction"
            name="domainAliasForm"
            scope="request"
            validate="false">
    </action>

    <action path="/private/update_alias"
            type="jamm.webapp.UpdateAliasAction"
            name="updateAliasForm"
            scope="request"
            validate="true"
            input="/private/account_admin.do">
    </action>

    <action path="/private/update_catchall"
            type="jamm.webapp.CatchAllAction"
            name="catchAllForm"
            scope="request"
            validate="true"
            input="/private/domain_admin.do">
    </action>

    <action path="/private/add_domain"
            type="jamm.webapp.AddDomainAction"
            name="addDomainForm"
            scope="request"
            validate="true"
            input="/private/add_domain.jsp">
    </action>

    <action path="/private/add_account"
            type="jamm.webapp.AddAccountAction"
            name="addAccountForm"
            scope="request"
            validate="true"
            input="/private/add_account.jsp">
    </action>

    <action path="/private/add_alias"
            type="jamm.webapp.AddAliasAction"
            name="addAliasForm"
            scope="request"
            validate="true"
            input="/private/add_alias.jsp">
    </action>

    <action path="/private/site_config"
            type="jamm.webapp.SiteConfigAction"
            name="siteConfigForm"
            scope="request"
            validate="false"
            input="/private/site_admin.jsp">
    </action>

    <!-- This will reload tileDefinitions.xml -->
    <action path="/admin/reload-tiles"
            type="org.apache.struts.tiles.actions.ReloadDefinitionsAction" />
  </action-mappings>

  <controller processorClass="org.apache.struts.tiles.TilesRequestProcessor"/>

  <!-- ========== Message Resources Definitions =========================== -->

  <message-resources parameter="ApplicationResources"/>

  <!-- ========== Plug Ins Configuration ================================== -->
  
  <!-- 
     Add multiple validator resource files by setting the pathname property. 
     Default pluggable validator definitions are contained in validator-rules.xml. 
     Add any validation rules for forms in validator.xml.
  -->
  <!--
  <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property property="pathname" value="/WEB-INF/validator-rules.xml"/>
    <set-property property="pathname" value="/WEB-INF/validator.xml"/>
  </plug-in>
  -->

</struts-config>
