UPGRADING FROM 0.9.2 OR BEFORE TO 0.9.3
---------------------------------------

Due to a schema change that first appeared in version 0.9.3, you'll
need to update your existing LDAP data.  Unfortunately, there is no
easy way to do this.  Many attributes that were in MAY have become
MUST items, some attributes have been removed.  Basically, things that
Jamm depends on being there have now been moved into MUST.

The following are the steps I followed to update my ldap server:

1) Dump the current database

   ldapsearch -b "o=hosting,dc=kgarner,dc=com" \
       -D "cn=Manager,o=hosting,dc=kgarner,dc=com" -W -x > ldap.dump

2) Edit the ldap.dump file

   To update your data, do the following:

	o For each JammVirtualDomain entry: remove editCatchAlls and
	editAliases, and add delete, and make sure lastChange has a
	value

	o For each JammMailAccount entry: add delete and make sure
	lastChange has a value

	o The JammMailAlias entries should be okay.

   Also included in the distribution is a perl script named
   updateLdif.pl. It'll take your current ldif and produce a new ldif
   file that is hopefully up to date with the new fields.  It requires
   the Net::LDAP and Set::Scalar perl modules.

	./updateLdif.pl ldap.dump fixed.ldap

3) shut down slapd

4) Backup and remove your original database files

5) copy new schema file into place for the ldap server

6) Restart slapd

7) load the cleaned up data into ldap

   ldapadd -D "cn=Manager,o=hosting,dc=kgarner,dc=com" -W -x -f fixed.ldap



